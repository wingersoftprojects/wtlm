<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./layout.xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <ui:define name="content">
        <div style="width: 100%;">
            <h:form id="form_task_detail">
                <p:growl showDetail="true" id="task_detail_messages"/>
                <p:panel style="background-color:bisque">
                    <center>
                        <h:outputText value="NEW TASK DETAILS" style="font-weight: bolder" rendered="#{task_detailBean.task_detailObject.task_detail_id ==0}"/> 
                        <h:outputText value="EDIT TASK DETAILS" style="font-weight: bolder" rendered="#{task_detailBean.task_detailObject.task_detail_id >=1}"/> 
                    </center>
                </p:panel>
                <br></br>
                <p:fieldset legend="Task Details" style="width: 95%">
                    <h:panelGrid columns="2">
                        <h:outputText value="Description" style="font-weight: bolder"/>                                
                        <h:inputTextarea value="#{task_detailBean.task_detailObject.task_description}" cols="70" rows="4" required="true" requiredMessage="Description field is required">
                            <f:ajax execute="@this"/>.
                        </h:inputTextarea>
                        <h:outputText value="Task Category:" style="font-weight: bolder"/>                            
                        <p:selectOneMenu id="task_category" value="#{task_detailBean.task_detailObject.task_category_id}"  required="true" requiredMessage="Task Category field is required!">
                            <f:selectItem itemLabel="Please Select" />                                    
                            <f:selectItem itemLabel="Hosting" itemValue="1"/>
                            <f:selectItem itemLabel="Website Design" itemValue="2"/>
                            <f:selectItem itemLabel="Proposal Writting" itemValue="3"/>
                            <f:selectItem itemLabel="CMS" itemValue="4"/>
                            <f:selectItem itemLabel="Training" itemValue="5"/>
                            <f:ajax execute="@this"/>
                        </p:selectOneMenu>
                        <h:outputText value="Priority:" style="font-weight: bolder"/>                            
                        <p:selectOneMenu id="task_priority" value="#{task_detailBean.task_detailObject.priority}" required="true" requiredMessage="Priority field is required!">
                            <f:selectItem itemLabel="Please Select" />                                    
                            <f:selectItem itemLabel="H" itemValue="H"/>
                            <f:selectItem itemLabel="M" itemValue="M"/>
                            <f:selectItem itemLabel="L" itemValue="L"/>                                   
                            <f:ajax execute="@this"/>
                        </p:selectOneMenu>
                        <h:outputText value="Raised Date:" style="font-weight: bolder"/>                            
                        <p:calendar value="#{task_detailBean.task_detailObject.raise_date}" styleClass="clsInput" id="expiry_date"  navigator="true" showButtonPanel="true" readonlyInput="true" required="true" requiredMessage="Rsaised Date field is required">
                            <p:ajax event="dateSelect" process="@this"/>
                        </p:calendar>
                        <h:outputText value="Raised By:" style="font-weight: bolder"/>                            
                        <p:inputText value="#{task_detailBean.task_detailObject.raised_by}" style="font-weight: bolder"/>
                        <p:outputLabel value="Assigned To: " style="font-weight: bolder"/>
                        <p:selectOneMenu id="assigned_to" value="#{task_detailBean.task_detailObject.assigned_to}" label="Please Select" style="font-weight: bolder" required="true" requiredMessage="Assigned To field is required"> 
                            <f:selectItem itemLabel="Please Select" /> 
                            <f:selectItem itemLabel="Phillip" itemValue="1"/>
                            <f:selectItem itemLabel="Solomon" itemValue="2"/>
                            <f:selectItem itemLabel="Brian" itemValue="3"/>                                   
                            <f:selectItem itemLabel="Racheal" itemValue="4"/>                                   
                            <f:ajax execute="@this"/>
                        </p:selectOneMenu>
                        <p:outputLabel value="Current Status: " style="font-weight: bolder"/>
                        <p:selectOneMenu id="status" value="#{task_detailBean.task_detailObject.current_status}" style="font-weight: bolder" required="true" requiredMessage="Current Status field is required"> 
                            <f:selectItem itemLabel="--select status" itemValue="--select status"/>
                            <f:selectItem itemLabel="PEND" itemValue="PEND"/>
                            <f:selectItem itemLabel="PROG" itemValue="PROG"/>
                            <f:selectItem itemLabel="COMP" itemValue="COMP"/>                                   
                            <p:ajax process="@this" update="@form"/>
                        </p:selectOneMenu>
                        <h:outputText value="Complete Date:" rendered="#{task_detailBean.task_detailObject.current_status =='COMP'}" style="font-weight: bolder"/>                            
                        <p:calendar value="#{task_detailBean.task_detailObject.complete_date}" rendered="#{task_detailBean.task_detailObject.current_status =='COMP'}" styleClass="clsInput" id="complete_date"  navigator="true" showButtonPanel="true" readonlyInput="true" required="true" requiredMessage="Complete Date field is required">
                            <p:ajax event="dateSelect" process="@this"/>
                        </p:calendar>
                        <h:outputText value="Completed By:" rendered="#{task_detailBean.task_detailObject.current_status =='COMP'}" style="font-weight: bolder"/>                            
                        <p:inputText value="#{task_detailBean.task_detailObject.completed_by}" rendered="#{task_detailBean.task_detailObject.current_status =='COMP'}" style="font-weight: bolder" required="true" requiredMessage="Complete By field is required"/>

                        <p:outputLabel value="Is Active?:" for="is_active" style="font-weight: bolder"/>
                        <p:selectOneMenu id="is_active" value="#{task_detailBean.task_detailObject.is_active}" required="true" requiredMessage="Is active field is required">
                            <f:selectItem itemLabel="" itemValue=""/>
                            <f:selectItem itemLabel="Yes" itemValue="1" />
                            <f:selectItem itemLabel="No" itemValue="0" />
                        </p:selectOneMenu>
                    </h:panelGrid>
                </p:fieldset>
                <p:panel style="background-color:bisque; width: 100%">
                    <center>
                        <p:commandButton value="SAVE (ALT+S)" action="#{task_detailBean.insertTask_detail(task_detailBean.task_detailObject)}" accesskey="s" style="font-weight: bolder; font-size: 20px"  rendered="#{task_detailBean.task_detailObject.task_detail_id ==0}" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="@form">
                            <p:dialog widgetVar="statusDialog" height="100" position="center" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                                <p:graphicImage name="/images/ajax-loader.gif"/>
                            </p:dialog>
                        </p:commandButton>
                        <td></td>
                        <p:commandButton value="UPDATE (ALT+U)" action="#{task_detailBean.updateTask_detail(task_detailBean.task_detailObject)}" accesskey="u" style="font-weight: bolder; font-size: 20px"  rendered="#{task_detailBean.task_detailObject.task_detail_id >=1}" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="@form">
                            <p:dialog widgetVar="statusDialog" height="100" position="center" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                                <p:graphicImage name="/images/ajax-loader.gif"/>
                            </p:dialog>
                        </p:commandButton>
                        <td></td>
                        <p:commandButton value="CLEAR (ALT+C)" action="#{task_detailBean.clearTask_detail(task_detailBean.task_detailObject)}" accesskey="c" style="font-weight: bolder; font-size: 20px" process="@this" update="@form"/>
                    </center>
                </p:panel>
                <p:messages/>
            </h:form>
        </div>
    </ui:define>
</ui:composition>


